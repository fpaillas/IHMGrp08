<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Préparation de la recette</title>
    <style>
        /* Ajoutez vos styles CSS ici */
        .etape-preparation {
            display: none;
        }
        .etape-preparation.active {
            display: block;
        }
    </style>
</head>
<body>
    <h1>Préparation de la recette</h1>

    <div id="details-recette">
        <!-- Les détails de la recette seront affichés ici -->
    </div>

    <!-- Boutons -->
    <button onclick="etapePrecedente()">Étape précédente</button>
    <button onclick="etapeSuivante()">Étape suivante</button>
    <button onclick="retourPageAccueil()">Retour</button>

    <script>
        // Fonction pour récupérer les paramètres de l'URL
        function getParams() {
            const params = new URLSearchParams(window.location.search);
            return params;
        }

        // Fonction pour récupérer le nom de la recette à partir des paramètres de l'URL
        function getNomRecette() {
            const params = getParams();
            return params.get('nomRecette');
        }

        // Fonction pour récupérer les étapes de préparation de la recette
        function getEtapesPreparation(nomRecette) {
            // Recherche de la recette par son nom
            const recette = recettes.find(r => r.nom === nomRecette);

            // Vérification si la recette a été trouvée
            if (recette) {
                // Séparation de la chaîne de préparation en étapes individuelles
                const etapes = recette.preparation.split('. ');

                // Retourner les étapes de préparation
                return etapes;
            } else {
                // Si la recette n'est pas trouvée, retourner un tableau vide
                return [];
            }
        }

        // Fonction pour afficher les détails de la recette sur la page
        function afficherDetailsRecette(nomRecette) {
            const detailsRecette = document.getElementById('details-recette');
            detailsRecette.innerHTML = `
                <h2>${nomRecette}</h2>
                <h3>Étapes de préparation :</h3>
                <div id="etapes-preparation">
                    <!-- Les étapes de préparation seront affichées ici -->
                </div>
            `;
            // Récupérer les étapes de préparation de la recette
            const etapes = getEtapesPreparation(nomRecette);
            const etapesPreparationDiv = document.getElementById('etapes-preparation');
            etapes.forEach((etape, index) => {
                const etapeDiv = document.createElement('div');
                etapeDiv.classList.add('etape-preparation');
                etapeDiv.setAttribute('id', `etape${index + 1}`);
                etapeDiv.innerHTML = `
                    <h3>Étape ${index + 1}</h3>
                    <p>${etape}</p>
                `;
                etapesPreparationDiv.appendChild(etapeDiv);
            });
            // Afficher la première étape par défaut
            document.getElementById('etape1').classList.add('active');
        }

        // Fonction pour passer à l'étape suivante
        function etapeSuivante() {
            const etapes = document.querySelectorAll('.etape-preparation');
            etapes.forEach((etape, index) => {
                if (etape.classList.contains('active')) {
                    etape.classList.remove('active');
                    if (index < etapes.length - 1) {
                        etapes[index + 1].classList.add('active');
                        return;
                    }
                }
            });
        }

        // Fonction pour revenir à l'étape précédente
        function etapePrecedente() {
            const etapes = document.querySelectorAll('.etape-preparation');
            for (let i = 0; i < etapes.length; i++) {
                if (etapes[i].classList.contains('active')) {
                    etapes[i].classList.remove('active');
                    if (i > 0) {
                        etapes[i - 1].classList.add('active');
                        return;
                    }
                }
            }
        }


        // Fonction pour retourner à la page d'accueil
        function retourPageAccueil() {
            window.location.href = 'ClaraTest.html';
        }

        // Appeler les fonctions pour afficher les détails de la recette
        const nomRecette = getNomRecette();
        afficherDetailsRecette(nomRecette);
    </script>
</body>
</html>
