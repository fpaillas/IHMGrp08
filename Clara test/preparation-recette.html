<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Préparation de la recette</title>
    <link rel="stylesheet" type="text/css" href="../design.css">
</head>
<body>
    <!----------------- entête haut de page ----------------->
    <iframe src="../header/header.html" frameborder="0"></iframe>
    <!----------------- entête haut de page ----------------->
    <h1>Recipe Preparation</h1>

    <div id="preparation-recette"></div>

    <button onclick="retourPageAccueil()">Back</button>
    <button onclick="etapePrecedente()">Previous Step</button>
    <button onclick="etapeSuivante()">Next Step</button>
    <button onclick="terminer()" id="boutonTerminer" style="display: none;">Finished</button>

    <script>
            const recettes = [
    {
        "nom": "Margherita Pizza",
        "categorie": "Pizza",
        "image": "Claraimg/pizzaM.jpeg",
        "ingredients": ["pizza dough", "tomato sauce", "mozzarella", "basil"],
        "preparation": "Margherita Pizza Preparation: \n1. Preheat the oven to 220°C. \n2. Roll out the pizza dough on a tray. \n3. Spread the tomato sauce on the dough. \n4. Arrange the mozzarella and basil leaves. \n5. Bake for 15-20 minutes."
    },
    {
        "nom": "Four Cheese Pizza",
        "categorie": "Pizza",
        "image": "Claraimg/pizza_quatre_fromages.jpeg",
        "ingredients": ["pizza dough", "tomato sauce", "mozzarella", "gorgonzola", "emmental", "parmesan", "oregano"],
        "preparation": "Four Cheese Pizza Preparation: \n1. Preheat the oven to 220°C. \n2. Roll out the pizza dough on a tray. \n3. Spread the tomato sauce on the dough. \n4. Arrange the different cheeses and sprinkle with oregano. \n5. Bake for 15-20 minutes."
    },
    {
        "nom": "Carbonara Pasta",
        "categorie": "Pasta",
        "image": "Claraimg/carbonara.jpeg",
        "ingredients": ["spaghetti", "eggs", "guanciale", "parmesan", "pepper"],
        "preparation": "Carbonara Pasta Preparation: \n1. Cook the pasta in boiling salted water. \n2. In a pan, sauté the guanciale. \n3. Beat the eggs with parmesan and pepper. \n4. Drain the pasta and mix it with guanciale. \n5. Off the heat, add the egg and parmesan mixture. \n6. Serve immediately."
    },
    {
        "nom": "Mushroom Risotto",
        "categorie": "Rice",
        "image": "Claraimg/rissotoC.jpeg",
        "ingredients": ["rice", "mushrooms", "chicken broth", "onion", "white wine", "parmesan"],
        "preparation": "Mushroom Risotto Preparation: \n1. Heat the chicken broth. \n2. Sauté the onion in a little oil. \n3. Add the rice and white wine, let it absorb. \n4. Gradually add the hot broth, stirring regularly, until the rice is cooked. \n5. Add the mushrooms and parmesan. \n6. Serve hot."
    },
    {
        "nom": "Lasagna",
        "categorie": "Pasta",
        "image": "Claraimg/lasagnes.jpeg",
        "ingredients": ["lasagna sheets", "ground beef", "tomato sauce", "béchamel", "grated cheese", "onion", "garlic", "olive oil", "salt", "pepper"],
        "preparation": "Lasagna Preparation: \n1. Sauté the onion and garlic in olive oil. \n2. Add the ground beef and cook it. \n3. Add the tomato sauce and let it simmer. \n4. In a dish, alternate layers of lasagna sheets, meat tomato sauce, and béchamel. \n5. Finish with a layer of grated cheese. \n6. Bake at 180°C for 30-40 minutes."
    },
    {
        "nom": "Chicken and Vegetable Rice",
        "categorie": "Rice",
        "image": "Claraimg/riz_poulet_legumes.jpeg",
        "ingredients": ["rice", "chicken fillet", "bell peppers", "peas", "carrots", "onion", "garlic", "chicken broth", "olive oil", "salt", "pepper", "curry powder"],
        "preparation": "Chicken and Vegetable Rice Preparation: \n1. Cook the rice in chicken broth. \n2. Sauté the onion and garlic in olive oil. \n3. Add the pieces of chicken and the diced vegetables. \n4. Season with curry powder, salt, and pepper. \n5. Add the cooked rice and mix. \n6. Serve hot."
    }];

// Récupérer le nom de la recette à partir de l'URL
const params = new URLSearchParams(window.location.search);
        const nomRecette = params.get('nomRecette');

        // Recherche de la recette par son nom
        const recette = recettes.find(r => r.nom === nomRecette);

        // Index de l'étape actuelle
        let currentStepIndex = 0;

        // Affichage de la première étape de préparation
        if (recette) {
            afficherEtape(currentStepIndex);
        }

        // Fonction pour afficher une étape de préparation
        function afficherEtape(index) {
            const preparationRecette = document.getElementById('preparation-recette');
            preparationRecette.innerHTML = `
                <h2>${recette.nom}</h2>
                <img src="${recette.image}" alt="${recette.nom}">
                <h3>Préparation :</h3>
                <p>${recette.preparation.split('\n')[index]}</p>
            `;
            if (index === 0) {
                document.getElementById('etapePrecedente').style.display = 'none';
            } else {
                document.getElementById('etapePrecedente').style.display = 'inline';
            }
            if (index === recette.preparation.split('\n').length - 1) {
                document.getElementById('etapeSuivante').style.display = 'none';
                document.getElementById('boutonTerminer').style.display = 'inline';
            } else {
                document.getElementById('etapeSuivante').style.display = 'inline';
                document.getElementById('boutonTerminer').style.display = 'none';
            }
        }


        // Fonction pour passer à l'étape suivante
        function etapeSuivante() {
            currentStepIndex = Math.min(currentStepIndex + 1, recette.preparation.split('\n').length - 1);
            afficherEtape(currentStepIndex);
        }

        // Fonction pour revenir à l'étape précédente
        function etapePrecedente() {
            currentStepIndex = Math.max(currentStepIndex - 1, 0);
            afficherEtape(currentStepIndex);
        }

        // Fonction pour terminer la préparation et revenir à la page principale
        function terminer() {
            window.location.href = "ClaraTest.html";
        }

        // Fonction pour retourner à la page d'accueil
        function retourPageAccueil() {
        // Affiche un message d'alerte et demande confirmation avant de naviguer
        const confirmation = confirm("Are you sure you want to return to the home page? Have you validated all the steps?");
        if (confirmation) {
        // Si l'utilisateur confirme, alors navigue vers la page précédente
        window.history.back();
        }
}
    </script>
</body>
</html>