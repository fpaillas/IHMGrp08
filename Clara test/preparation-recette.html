<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recipe Preparation</title>
    <link rel="stylesheet" type="text/css" href="../design.css">
    <style>
        .progress-bar {
            width: 100%;
            background-color: #f0f0f0;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .progress {
            height: 30px;
            background-color: #4caf50;
            border-radius: 5px;
            text-align: center;
            line-height: 30px;
            color: white;
            font-weight: bold;
            transition: width 0.5s ease-in-out;
        }
        
        .preparation-step {
            font-style: italic;
        }
    </style>
</head>
<body>
<!----------------- Header Section ----------------->
<iframe src="../header/header.html" frameborder="0"></iframe>
<!----------------- Header Section ----------------->
<h1>Recipe Preparation</h1>

<div id="recipe-preparation"></div>
<div class="progress-bar">
    <div class="progress" id="progress">0%</div>
</div>

<button onclick="window.history.go(-2)">Back to Previous Page</button>
<button onclick="previousStep()" id="previousStep" style="display: none;">Previous Step</button>
<button onclick="nextStep()" id="nextStep" style="display: none;">Next Step</button>
<button onclick="finish()" id="finishButton" style="display: none;">Finish</button>

<script>
    const recipes = [
    {
        "name": "Margherita Pizza",
        "category": "Pizza",
        "image": "Claraimg/pizzaM.jpeg",
        "ingredients": ["pizza dough", "tomato sauce", "mozzarella", "basil"],
        "preparation": "Preparation of Margherita Pizza: \n1. Preheat the oven to 220°C. \n2. Roll out the pizza dough on a baking sheet. \n3. Spread the tomato sauce over the dough. \n4. Arrange the mozzarella and basil leaves. \n5. Bake for 15-20 minutes."
    },
    {
        "name": "Four Cheese Pizza",
        "category": "Pizza",
        "image": "Claraimg/pizza_quatre_fromages.jpeg",
        "ingredients": ["pizza dough", "tomato sauce", "mozzarella", "gorgonzola", "emmental", "parmesan", "oregano"],
        "preparation": "Preparation of Four Cheese Pizza: \n1. Preheat the oven to 220°C. \n2. Roll out the pizza dough on a baking sheet. \n3. Spread the tomato sauce over the dough. \n4. Add the different cheeses and sprinkle with oregano. \n5. Bake for 15-20 minutes."
    },
    {
        "name": "Spaghetti Carbonara",
        "category": "Pasta",
        "image": "Claraimg/carbonara.jpeg",
        "ingredients": ["spaghetti", "eggs", "guanciale", "parmesan", "pepper"],
        "preparation": "Preparation of Spaghetti Carbonara: \n1. Cook the spaghetti in boiling salted water. \n2. In a pan, fry the guanciale. \n3. Beat the eggs with parmesan and pepper. \n4. Drain the pasta and mix with the guanciale. \n5. Off the heat, add the egg and parmesan mixture. \n6. Serve immediately."
    },
    {
        "name": "Mushroom Risotto",
        "category": "Rice",
        "image": "Claraimg/rissotoC.jpeg",
        "ingredients": ["rice", "mushrooms", "chicken broth", "onion", "white wine", "parmesan"],
        "preparation": "Preparation of Mushroom Risotto: \n1. Heat the chicken broth. \n2. Fry the onion in a little oil. \n3. Add the rice and white wine, let it absorb. \n4. Gradually add the hot broth, stirring regularly, until the rice is cooked. \n5. Add the mushrooms and parmesan. \n6. Serve hot."
    },
    {
        "name": "Lasagna",
        "category": "Pasta",
        "image": "Claraimg/lasagnes.jpeg",
        "ingredients": ["lasagna sheets", "ground beef", "tomato sauce", "béchamel sauce", "grated cheese", "onion", "garlic", "olive oil", "salt", "pepper"],
        "preparation": "Preparation of Lasagna: \n1. Fry the onion and garlic in olive oil. \n2. Add the ground beef and cook. \n3. Add the tomato sauce and simmer. \n4. In a dish, alternate layers of lasagna sheets, meat sauce, and béchamel sauce. \n5. Finish with a layer of grated cheese. \n6. Bake at 180°C for 30-40 minutes."
    },
    {
        "name": "Chicken and Vegetable Rice",
        "category": "Rice",
        "image": "Claraimg/riz_poulet_legumes.jpeg",
        "ingredients": ["rice", "chicken breast", "bell peppers", "peas", "carrots", "onion", "garlic", "chicken broth", "olive oil", "salt", "pepper", "curry powder"],
        "preparation": "Preparation of Chicken and Vegetable Rice: \n1. Cook the rice in chicken broth. \n2. Fry the onion and garlic in olive oil. \n3. Add the pieces of chicken and diced vegetables. \n4. Season with curry powder, salt, and pepper. \n5. Add the cooked rice and mix. \n6. Serve hot."
    }
];


    // Get the recipe name from the URL
    const params = new URLSearchParams(window.location.search);
    const recipeName = params.get('recipeName');

    // Find the recipe by its name
    const recipe = recipes.find(r => r.name === recipeName);

    // Index of the current step
    let currentStepIndex = 0;

    // Display the first preparation step
    if (recipe) {
        displayStep(currentStepIndex);
    }

    // Function to display a preparation step
    function displayStep(index) {
        const recipePreparation = document.getElementById('recipe-preparation');
        recipePreparation.innerHTML = `
                <h2>${recipe.name}</h2>
                <img src="${recipe.image}" alt="${recipe.name}">
                <h3>Preparation:</h3>
                <p class="preparation-step">${recipe.preparation.split('\n')[index]}</p>
            `;
        if (index === 0) {
            document.getElementById('previousStep').style.display = 'none';
        } else {
            document.getElementById('previousStep').style.display = 'inline';
        }
        if (index === recipe.preparation.split('\n').length - 1) {
            document.getElementById('nextStep').style.display = 'none';
            document.getElementById('finishButton').style.display = 'inline';
        } else {
            document.getElementById('nextStep').style.display = 'inline';
            document.getElementById('finishButton').style.display = 'none';
        }

        // Update the progress bar
        const progressElement = document.getElementById('progress');
        const totalSteps = recipe.preparation.split('\n').length - 1;
        const stepPercentage = 100 / totalSteps;
        const progress = stepPercentage * index;
        progressElement.style.width = `${progress}%`;
        progressElement.textContent = `${progress.toFixed(0)}%`;
    }

    // Function to move to the next step
    function nextStep() {
        currentStepIndex = Math.min(currentStepIndex + 1, recipe.preparation.split('\n').length - 1);
        displayStep(currentStepIndex);
    }

    // Function to move to the previous step
    function previousStep() {
        currentStepIndex = Math.max(currentStepIndex - 1, 0);
        displayStep(currentStepIndex);
    }

    // Function to finish the preparation and return to the main page
    function finish() {
        window.location.href = "main.html";
    }
</script>
</body>
</html>
